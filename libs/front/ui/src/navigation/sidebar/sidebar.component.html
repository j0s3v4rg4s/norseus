@let isMobileOpen = layoutStore.isMobileOpen();
@let visibleLargeMenu = layoutStore.visibleLargeMenu();

<aside
  class="fixed flex flex-col top-0 px-4 left-0 bg-background text-gray-900 h-screen transition-all duration-300 ease-in-out z-999 border-r border-gray-200"
  [class]="{
    'w-[250px]': visibleLargeMenu,
    'w-[90px]': !visibleLargeMenu,
    'translate-x-0': isMobileOpen,
    '-translate-x-full': !isMobileOpen,
    'xl:translate-x-0': true,
  }"
>
  <div class="pt-4 h-17 relative overflow-hidden">
    @if (layoutStore.logo()) {
      <a
        routerLink="/"
        class="absolute inset-0 flex items-center justify-center w-max"
        [@logoSlide]="logoExpandedState()"
      >
        <img [ngSrc]="layoutStore.logo()!" alt="Logo" width="144" height="36" class="aspect-[4/1] object-contain" />
      </a>
    }
    @if (layoutStore.icon()) {
      <a routerLink="/" class="absolute inset-0 flex items-center justify-center" [@iconSlide]="logoCollapsedState()">
        <img [ngSrc]="layoutStore.icon()!" alt="Icon" width="36" height="36" class="aspect-square object-contain" />
      </a>
    }
  </div>

  <div class="flex flex-col overflow-y-auto duration-300 ease-linear no-scrollbar flex-1 pt-4">
    <ui-menu-section
      title="menu"
      [items]="layoutStore.menuItems()"
      [isExpanded]="visibleLargeMenu"
      section="main"
      [openSubmenu]="openSubmenu()"
      (toggleSubmenu)="toggleSubmenu($event)"
    >
    </ui-menu-section>
  </div>
</aside>

@if (isMobileOpen) {
  <!-- eslint-disable-next-line @angular-eslint/template/click-events-have-key-events -->
  <div tabindex="-1" class="fixed inset-0 z-99 bg-gray-900/50 xl:hidden" (click)="closeSidebar()"></div>
}
